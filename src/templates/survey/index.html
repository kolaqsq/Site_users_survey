{% load static %}
{% load group_tags %}

<!doctype html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <title>Личный кабинет</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Ruda:wght@400;700;900&family=Stalinist+One&display=swap"
          rel="stylesheet">

    <link rel="stylesheet" href="{% static 'survey/css/main.css' %}" type="text/css">
</head>
<body class="page">
<header class="header">
    <a class="header__logo" href="{% url 'survey:index' %}">Опросус</a>
    <div class="header__navbar">
        <span class="header__text">
        <svg class="header__icon" width="28" height="28" viewBox="0 0 28 28" fill="none"
             xmlns="http://www.w3.org/2000/svg">
            <path d="M14 0C6.272 0 0 6.272 0 14C0 21.728 6.272 28 14 28C21.728 28 28 21.728 28 14C28 6.272 21.728 0 14 0ZM14 4.2C16.324 4.2 18.2 6.076 18.2 8.4C18.2 10.724 16.324 12.6 14 12.6C11.676 12.6 9.8 10.724 9.8 8.4C9.8 6.076 11.676 4.2 14 4.2ZM14 24.08C10.5 24.08 7.406 22.288 5.6 19.572C5.642 16.786 11.2 15.26 14 15.26C16.786 15.26 22.358 16.786 22.4 19.572C20.594 22.288 17.5 24.08 14 24.08Z"
                  fill="#F8D4D4">
            </path>
        </svg>
        {{ user.username }}
    </span>

        {% if user|has_group:"Operators" or user.is_superuser %}
            {#        <a class="header_text header__text_link" href="{% url 'dashboard' %}">#}
            <a class="header__text header__text_link" href="{% url 'survey:index' %}">
                <svg class="header__icon" width="28" height="28" viewBox="0 0 28 28"
                     xmlns="http://www.w3.org/2000/svg">
                    <path d="M1.55556 15.5556H10.8889C11.3014 15.5556 11.6971 15.3917 11.9888 15.0999C12.2806 14.8082 12.4444 14.4126 12.4444 14V1.55556C12.4444 1.143 12.2806 0.747335 11.9888 0.455612C11.6971 0.163888 11.3014 0 10.8889 0H1.55556C1.143 0 0.747335 0.163888 0.455612 0.455612C0.163888 0.747335 0 1.143 0 1.55556V14C0 14.4126 0.163888 14.8082 0.455612 15.0999C0.747335 15.3917 1.143 15.5556 1.55556 15.5556ZM0 26.4444C0 26.857 0.163888 27.2527 0.455612 27.5444C0.747335 27.8361 1.143 28 1.55556 28H10.8889C11.3014 28 11.6971 27.8361 11.9888 27.5444C12.2806 27.2527 12.4444 26.857 12.4444 26.4444V20.2222C12.4444 19.8097 12.2806 19.414 11.9888 19.1223C11.6971 18.8306 11.3014 18.6667 10.8889 18.6667H1.55556C1.143 18.6667 0.747335 18.8306 0.455612 19.1223C0.163888 19.414 0 19.8097 0 20.2222V26.4444ZM15.5556 26.4444C15.5556 26.857 15.7194 27.2527 16.0112 27.5444C16.3029 27.8361 16.6986 28 17.1111 28H26.4444C26.857 28 27.2527 27.8361 27.5444 27.5444C27.8361 27.2527 28 26.857 28 26.4444V15.5556C28 15.143 27.8361 14.7473 27.5444 14.4556C27.2527 14.1639 26.857 14 26.4444 14H17.1111C16.6986 14 16.3029 14.1639 16.0112 14.4556C15.7194 14.7473 15.5556 15.143 15.5556 15.5556V26.4444ZM17.1111 10.8889H26.4444C26.857 10.8889 27.2527 10.725 27.5444 10.4333C27.8361 10.1416 28 9.74589 28 9.33333V1.55556C28 1.143 27.8361 0.747335 27.5444 0.455612C27.2527 0.163888 26.857 0 26.4444 0H17.1111C16.6986 0 16.3029 0.163888 16.0112 0.455612C15.7194 0.747335 15.5556 1.143 15.5556 1.55556V9.33333C15.5556 9.74589 15.7194 10.1416 16.0112 10.4333C16.3029 10.725 16.6986 10.8889 17.1111 10.8889Z"
                          fill="#F8D4D4">
                    </path>
                </svg>
                Дашборд
            </a>
        {% endif %}

        <a class="header__text header__text_link" href="{% url 'logout' %}">
            <svg class="header__icon" width="33" height="28" viewBox="0 0 33 28" fill="none"
                 xmlns="http://www.w3.org/2000/svg">
                <path d="M8.88477 14C8.88477 13.6625 9.0185 13.3387 9.25653 13.1C9.49456 12.8614 9.8174 12.7273 10.154 12.7273H21.5773V4.45455C21.5773 1.90909 18.8968 0 16.5003 0H4.44239C3.26458 0.00126336 2.13537 0.470986 1.30254 1.3061C0.4697 2.14122 0.00125991 3.27351 0 4.45455V23.5455C0.00125991 24.7265 0.4697 25.8588 1.30254 26.6939C2.13537 27.529 3.26458 27.9987 4.44239 28H17.1349C18.3127 27.9987 19.4419 27.529 20.2748 26.6939C21.1076 25.8588 21.576 24.7265 21.5773 23.5455V15.2727H10.154C9.8174 15.2727 9.49456 15.1386 9.25653 14.9C9.0185 14.6613 8.88477 14.3375 8.88477 14Z"
                      fill="#F8D4D4">
                </path>
                <path d="M32.6284 13.1004L26.2821 6.73675C26.0421 6.50814 25.7226 6.38257 25.3916 6.38682C25.0607 6.39107 24.7444 6.5248 24.5104 6.75949C24.2763 6.99418 24.143 7.31127 24.1387 7.64315C24.1345 7.97503 24.2597 8.29544 24.4877 8.53606L28.6667 12.7273H21.5771V15.2728H28.6667L24.4877 19.464C24.3649 19.581 24.2667 19.7215 24.1988 19.8772C24.131 20.0328 24.095 20.2006 24.0928 20.3704C24.0906 20.5403 24.1224 20.7089 24.1862 20.8662C24.25 21.0236 24.3446 21.1665 24.4644 21.2867C24.5842 21.4068 24.7268 21.5017 24.8837 21.5657C25.0407 21.6297 25.2088 21.6615 25.3782 21.6593C25.5476 21.6572 25.7148 21.621 25.8701 21.553C26.0253 21.485 26.1654 21.3865 26.2821 21.2633L32.6284 14.8997C32.8662 14.661 32.9998 14.3374 32.9998 14C32.9998 13.6626 32.8662 13.339 32.6284 13.1004Z"
                      fill="#F8D4D4">
                </path>
            </svg>
            Выход
        </a>
    </div>
</header>
<main class="main">
    <div class="surveys">
        <div class="surveys__navbar">
            {% if user|has_group:"Operators" or user.is_superuser %}
                <span class="surveys__header">Все анкеты</span>
            {% else %}
                <span class="surveys__header">Мои анкеты</span>
            {% endif %}
            <div class="surveys__options">
                {#            <button class="surveys__button" onclick="window.location.href='{% url 'create' %}';">#}
                <button type="button" class="surveys__button"
                        onclick="window.location.href='{% url 'survey:index' %}';">
                    <svg class="surveys__icon" width="28" height="28" viewBox="0 0 28 28" fill="none"
                         xmlns="http://www.w3.org/2000/svg">
                        <g filter="url(#filter0_dd)">
                            <path fill-rule="evenodd" clip-rule="evenodd"
                                  d="M16 0C9.37273 0 4 5.37273 4 12C4 18.6273 9.37273 24 16 24C22.6273 24 28 18.6273 28 12C28 5.37273 22.6273 0 16 0ZM17.0909 16.3636C17.0909 16.653 16.976 16.9304 16.7714 17.135C16.5668 17.3396 16.2893 17.4545 16 17.4545C15.7107 17.4545 15.4332 17.3396 15.2286 17.135C15.024 16.9304 14.9091 16.653 14.9091 16.3636V13.0909H11.6364C11.347 13.0909 11.0696 12.976 10.865 12.7714C10.6604 12.5668 10.5455 12.2893 10.5455 12C10.5455 11.7107 10.6604 11.4332 10.865 11.2286C11.0696 11.024 11.347 10.9091 11.6364 10.9091H14.9091V7.63636C14.9091 7.34704 15.024 7.06956 15.2286 6.86497C15.4332 6.66039 15.7107 6.54545 16 6.54545C16.2893 6.54545 16.5668 6.66039 16.7714 6.86497C16.976 7.06956 17.0909 7.34704 17.0909 7.63636V10.9091H20.3636C20.653 10.9091 20.9304 11.024 21.135 11.2286C21.3396 11.4332 21.4545 11.7107 21.4545 12C21.4545 12.2893 21.3396 12.5668 21.135 12.7714C20.9304 12.976 20.653 13.0909 20.3636 13.0909H17.0909V16.3636Z"
                                  fill="#F8D4D4"></path>
                        </g>
                        <defs>
                            <filter id="filter0_dd" x="0" y="0" width="28" height="28" filterUnits="userSpaceOnUse"
                                    color-interpolation-filters="sRGB">
                                <feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood>
                                <feColorMatrix in="SourceAlpha" type="matrix"
                                               values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"></feColorMatrix>
                                <feOffset dx="-4" dy="4"></feOffset>
                                <feColorMatrix type="matrix"
                                               values="0 0 0 0 0.620833 0 0 0 0 0.377674 0 0 0 0 0.377674 0 0 0 1 0"></feColorMatrix>
                                <feBlend mode="normal" in2="BackgroundImageFix"
                                         result="effect1_dropShadow"></feBlend>
                                <feColorMatrix in="SourceAlpha" type="matrix"
                                               values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"></feColorMatrix>
                                <feOffset dx="-2" dy="2"></feOffset>
                                <feColorMatrix type="matrix"
                                               values="0 0 0 0 0.958333 0 0 0 0 0.399306 0 0 0 0 0.399306 0 0 0 1 0"></feColorMatrix>
                                <feBlend mode="normal" in2="effect1_dropShadow"
                                         result="effect2_dropShadow"></feBlend>
                                <feBlend mode="normal" in="SourceGraphic" in2="effect2_dropShadow"
                                         result="shape"></feBlend>
                            </filter>
                        </defs>
                    </svg>
                    Создать
                </button>
                <form class="surveys__search" action="{% url 'survey:index' %}" method="get">
                    <svg class="surveys__icon" width="25" height="25" viewBox="0 0 25 25" fill="none"
                         xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd"
                              d="M16.1012 15.125H17.1875L24.0487 22L22 24.0487L15.125 17.1875V16.1012L14.7537 15.7162C13.1862 17.0637 11.1512 17.875 8.9375 17.875C4.00125 17.875 0 13.8737 0 8.9375C0 4.00125 4.00125 0 8.9375 0C13.8737 0 17.875 4.00125 17.875 8.9375C17.875 11.1512 17.0637 13.1862 15.7162 14.7537L16.1012 15.125ZM2.75 8.9375C2.75 12.3613 5.51375 15.125 8.9375 15.125C12.3613 15.125 15.125 12.3613 15.125 8.9375C15.125 5.51375 12.3613 2.75 8.9375 2.75C5.51375 2.75 2.75 5.51375 2.75 8.9375Z"
                              fill="#F46666"></path>
                    </svg>
                    <input class="surveys__input" name="q" type="text" value="{{ query }}" placeholder="Поиск">
                </form>
            </div>
        </div>
        {% if survey_list %}
            <div class="surveys__list">
                {% for survey in survey_list %}
                    <div class="survey">
                        {% if user|has_group:"Operators" or user.is_superuser %}
                            <span class="survey__text">{{ survey.created_by }} </span>
                            {#                        <button class="survey__button" onclick="window.location.href='{% url 'edit' survey.id %}';">#}
                            <button class="survey__button"
                                    onclick="window.location.href='{% url 'survey:index' %}';">
                                <span>{{ survey.title }}</span>
                            </button>
                        {% else %}
                            {#                        <button class="survey__button" onclick="window.location.href='{% url 'edit' survey.id %}';">#}
                            <button class="survey__button survey__button_long"
                                    onclick="window.location.href='{% url 'survey:index' %}';">
                                <span>{{ survey.title }}</span>
                            </button>
                        {% endif %}

                        <button class="survey__button survey__button_secondary"
                                onclick="window.location.href='{% url 'survey:survey' survey.id %}';">
                            <svg class="surveys__icon" width="28" height="28" viewBox="0 0 28 28" fill="none"
                                 xmlns="http://www.w3.org/2000/svg">
                                <path d="M16.0586 11.9413C14.9665 10.8497 13.4855 10.2365 11.9414 10.2365C10.3972 10.2365 8.91631 10.8497 7.8242 11.9413L3.70567 16.0585C2.61355 17.1507 2 18.6319 2 20.1764C2 21.7209 2.61355 23.2021 3.70567 24.2943C4.7978 25.3864 6.27904 25.9999 7.82354 25.9999C9.36803 25.9999 10.8493 25.3864 11.9414 24.2943L14 22.2357"
                                      stroke="#F8D4D4" stroke-width="2.33333" stroke-linecap="round"
                                      stroke-linejoin="round"></path>
                                <path d="M11.9414 16.0586C13.0335 17.1502 14.5145 17.7635 16.0586 17.7635C17.6028 17.7635 19.0837 17.1502 20.1758 16.0586L24.2943 11.9414C25.3865 10.8493 26 9.36803 26 7.82354C26 6.27904 25.3865 4.7978 24.2943 3.70567C23.2022 2.61355 21.721 2 20.1765 2C18.632 2 17.1507 2.61355 16.0586 3.70567L14 5.76427"
                                      stroke="#F8D4D4" stroke-width="2.33333" stroke-linecap="round"
                                      stroke-linejoin="round"></path>
                            </svg>
                            Перейти
                        </button>
                        {#                        <button class="survey__button survey__button_secondary"#}
                        {#                                onclick="window.location.href='{% url 'answers' survey.id %}';">#}
                        <button class="survey__button survey__button_secondary"
                                onclick="window.location.href='{% url 'survey:index' %}';">
                            <svg class="surveys__icon" width="28" height="24" viewBox="0 0 28 24" fill="none"
                                 xmlns="http://www.w3.org/2000/svg">
                                <path d="M6.5334 7.38464C5.79079 7.38464 5.0786 7.6764 4.5535 8.19573C4.0284 8.71506 3.7334 9.41943 3.7334 10.1539V12.9231H9.3334V10.1539C9.3334 9.41943 9.0384 8.71506 8.5133 8.19573C7.9882 7.6764 7.276 7.38464 6.5334 7.38464Z"
                                      fill="#F8D4D4"></path>
                                <path fill-rule="evenodd" clip-rule="evenodd"
                                      d="M0 2.76923C0 2.03479 0.294999 1.33042 0.820101 0.811089C1.3452 0.291757 2.05739 0 2.8 0H10.2667C11.0093 0 11.7215 0.291757 12.2466 0.811089C12.7717 1.33042 13.0667 2.03479 13.0667 2.76923V21.2308C13.0667 21.9652 12.7717 22.6696 12.2466 23.1889C11.7215 23.7082 11.0093 24 10.2667 24H2.8C2.05739 24 1.3452 23.7082 0.820101 23.1889C0.294999 22.6696 0 21.9652 0 21.2308L0 2.76923ZM3.73333 18.4615V14.7692H9.33333V18.4615H11.2V10.1538C11.2 8.92977 10.7083 7.75583 9.83317 6.89028C8.958 6.02472 7.77101 5.53846 6.53333 5.53846C5.29566 5.53846 4.10867 6.02472 3.2335 6.89028C2.35833 7.75583 1.86667 8.92977 1.86667 10.1538V18.4615H3.73333Z"
                                      fill="#F8D4D4"></path>
                                <path d="M22.3998 11.077H18.6665V7.38464H22.3998C22.8949 7.38464 23.3697 7.57915 23.7198 7.92537C24.0698 8.27159 24.2665 8.74117 24.2665 9.2308C24.2665 9.72043 24.0698 10.19 23.7198 10.5362C23.3697 10.8824 22.8949 11.077 22.3998 11.077Z"
                                      fill="#F8D4D4"></path>
                                <path d="M22.3998 16.6154H18.6665V12.9231H22.3998C22.8949 12.9231 23.3697 13.1176 23.7198 13.4638C24.0698 13.81 24.2665 14.2796 24.2665 14.7692C24.2665 15.2589 24.0698 15.7285 23.7198 16.0747C23.3697 16.4209 22.8949 16.6154 22.3998 16.6154Z"
                                      fill="#F8D4D4"></path>
                                <path fill-rule="evenodd" clip-rule="evenodd"
                                      d="M14.9331 2.76923C14.9331 2.03479 15.2281 1.33042 15.7532 0.811089C16.2783 0.291757 16.9905 0 17.7331 0H25.1998C25.9424 0 26.6546 0.291757 27.1797 0.811089C27.7048 1.33042 27.9998 2.03479 27.9998 2.76923V21.2308C27.9998 21.9652 27.7048 22.6696 27.1797 23.1889C26.6546 23.7082 25.9424 24 25.1998 24H17.7331C16.9905 24 16.2783 23.7082 15.7532 23.1889C15.2281 22.6696 14.9331 21.9652 14.9331 21.2308V2.76923ZM22.3998 5.53846H16.7998V18.4615H22.3998C23.1581 18.4616 23.8985 18.2332 24.5224 17.8069C25.1462 17.3805 25.624 16.7763 25.8922 16.0748C26.1603 15.3732 26.2061 14.6075 26.0234 13.8796C25.8406 13.1517 25.4381 12.4961 24.8694 12C25.4381 11.5039 25.8406 10.8483 26.0234 10.1204C26.2061 9.39247 26.1603 8.62679 25.8922 7.92523C25.624 7.22368 25.1462 6.61951 24.5224 6.19314C23.8985 5.76677 23.1581 5.53841 22.3998 5.53846Z"
                                      fill="#F8D4D4"></path>
                            </svg>
                            Ответы
                        </button>
                        {% if survey.is_open %}
                            <span class="survey__text">
                                <svg class="surveys__icon" width="26" height="26" viewBox="0 0 26 26" fill="none"
                                     xmlns="http://www.w3.org/2000/svg">
                                    <path d="M11.6711 18.8161L12.1189 18.321L12.119 18.3208L20.348 9.22655C20.4523 9.11723 20.534 8.98841 20.5885 8.84744C20.6442 8.70336 20.6703 8.54953 20.6653 8.39513C20.6602 8.24072 20.6241 8.08892 20.5591 7.9488L20.1055 8.15921L20.5591 7.94879C20.4941 7.80866 20.4015 7.68306 20.2869 7.57948C20.1723 7.47592 20.038 7.39651 19.892 7.34599C19.746 7.29547 19.5913 7.27489 19.4372 7.28546C19.2831 7.29603 19.1327 7.33754 18.995 7.40753C18.8603 7.47592 18.7405 7.57015 18.6424 7.68479L11.1983 15.9106L9.44508 14.3095L7.30128 12.1751L7.30135 12.175L7.29396 12.1679C7.07346 11.9572 6.77827 11.8427 6.47333 11.8496C6.16839 11.8565 5.87868 11.9842 5.66794 12.2047C5.45719 12.4252 5.34268 12.7204 5.34958 13.0254C5.35648 13.3303 5.48423 13.62 5.70474 13.8308L5.70498 13.831L10.4719 18.3808L10.4721 18.381L10.9548 18.8423L11.3264 19.1974L11.6711 18.8161ZM25.5 13C25.5 19.9038 19.9038 25.5 13 25.5C6.09624 25.5 0.5 19.9038 0.5 13C0.5 6.09624 6.09624 0.5 13 0.5C19.9038 0.5 25.5 6.09624 25.5 13Z"
                                          fill="#F46666" stroke="#F8D4D4"></path>
                                </svg>
                                Открыто
                            </span>
                        {% else %}
                            <span class="survey__text">
                                <svg class="surveys__icon" width="26" height="26" viewBox="0 0 26 26" fill="none"
                                     xmlns="http://www.w3.org/2000/svg">
                                    <path d="M7.59069 18.4092L7.5908 18.4093C7.80646 18.6249 8.09891 18.746 8.40385 18.746C8.70879 18.746 9.00124 18.6249 9.2169 18.4093L9.21695 18.4093L13 14.6262L16.783 18.4093L16.783 18.4093L16.7892 18.4153C17.0061 18.6248 17.2966 18.7407 17.5982 18.7381C17.8997 18.7355 18.1881 18.6146 18.4013 18.4013L18.0478 18.0478L18.4013 18.4013C18.6146 18.1881 18.7355 17.8997 18.7381 17.5982C18.7407 17.2966 18.6248 17.0061 18.4153 16.7892L18.4154 16.7892L18.4093 16.783L14.6262 13L18.4093 9.21695L18.4093 9.21701L18.4153 9.21076C18.6248 8.99386 18.7407 8.70337 18.7381 8.40185C18.7355 8.10031 18.6146 7.81188 18.4013 7.59867L18.0478 7.95222L18.4013 7.59866C18.1881 7.38545 17.8997 7.2645 17.5982 7.26188C17.2966 7.25926 17.0061 7.37518 16.7892 7.58465L16.7892 7.5846L16.783 7.59075L13 11.3738L9.21695 7.59075L9.21701 7.59069L9.21076 7.58466C8.99386 7.37518 8.70337 7.25926 8.40184 7.26188C8.10032 7.2645 7.81188 7.38545 7.59867 7.59866L7.95222 7.95222L7.59866 7.59867C7.38545 7.81188 7.2645 8.10032 7.26188 8.40184C7.25926 8.70337 7.37518 8.99386 7.58466 9.21076L7.5846 9.21081L7.59075 9.21695L11.3738 13L7.59075 16.783L7.59069 16.7831C7.3751 16.9988 7.25399 17.2912 7.25399 17.5961C7.25399 17.9011 7.3751 18.1935 7.59069 18.4092ZM25.5 13C25.5 19.9038 19.9038 25.5 13 25.5C6.09624 25.5 0.5 19.9038 0.5 13C0.5 6.09624 6.09624 0.5 13 0.5C19.9038 0.5 25.5 6.09624 25.5 13Z"
                                          fill="#F46666" stroke="#F8D4D4"></path>
                                </svg>
                                Закрыто
                            </span>
                        {% endif %}
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <span class="surveys__error">Нет анкет</span>
        {% endif %}
    </div>
</main>
<footer class="footer">
    <span class="footer__copyright">
        2021 Rete Studio<sup class="footer__copyright">©</sup><br class="footer__copyright">
        Копирование контента и размещение на других сайтах запрещено
    </span>
</footer>
</body>
</html>
